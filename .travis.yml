language: rust

rust:
  - nightly
  - beta
  - stable

matrix:
  include:
    - rust: 1.31.0
      script: cargo test --tests
    - rust: nightly
      os: osx
    - rust: nightly
      os: windows
    - rust: nightly
      name: Cortex-M
      install: rustup target add thumbv7m-none-eabi
      script: cd tests/cortex && cargo run --release

script:
  - cargo test
  - cargo test --release
